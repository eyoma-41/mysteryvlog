<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <title>Intro · EYOMA</title>
  <meta name="description" content="미스터리 브이로그 프리 인트로 페이지"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700;900&display=swap" rel="stylesheet">
  <style>
    :root{
      --bg:#0b0c0f; --text:#f6f7fb; --muted:#a7adbb; --brand:#ff0033; --line:rgba(255,255,255,.12);
      --type-ch:24ch; /* 타이핑 폭 고정 */
    }
    *{box-sizing:border-box}
    html,body{height:100%;margin:0}
    body{
      background:
        radial-gradient(1200px 600px at 80% 10%,rgba(255,0,51,.08),transparent),
        radial-gradient(900px 480px at 10% 90%,rgba(255,0,51,.06),transparent),
        var(--bg);
      color:var(--text);
      font-family:"Noto Sans KR",system-ui,-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Pretendard,sans-serif;
      overflow:hidden;
    }
    .wrap{height:100%;display:grid;place-items:center;padding:16px}
    .stack{
      display:grid;gap:18px;text-align:center;max-width:960px;width:100%;
      transform:translateY(10px);opacity:0;animation:fadeIn .8s ease forwards;
    }
    .kicker{letter-spacing:.18em;text-transform:uppercase;color:var(--muted);font-size:12px}
    h1{margin:0;font-size:clamp(28px,6vw,64px);line-height:1.08;font-weight:900;cursor:pointer}
    .sub{color:var(--muted);font-size:clamp(13px,2.3vw,18px)}
    .type{
      margin:6px auto 0;width:var(--type-ch);white-space:nowrap;border-right:2px solid var(--text);
      overflow:hidden;font-weight:700;font-size:clamp(16px,2.8vw,24px);
      animation:typing 1.8s steps(24,end) .6s both, caret .9s step-end infinite;
    }
    .cta{margin-top:10px;display:flex;justify-content:center;gap:10px;flex-wrap:wrap}
    .btn{
      appearance:none;border:none;cursor:pointer;padding:12px 16px;border-radius:999px;
      background:var(--text);color:#0b0c0f;font-weight:800;font-size:14px;
      transition:transform .12s ease,opacity .2s ease;
    }
    .btn.ghost{background:transparent;color:var(--text);border:1px solid rgba(246,247,251,.2)}
    .btn.icon{padding:8px 12px}
    .btn:active{transform:translateY(1px)}

    .line{opacity:0;transform:translateY(6px)}
    .line.show{animation:reveal .6s ease forwards}

    /* Info panel */
    .panel{
      position:fixed;left:0;right:0;bottom:-70vh;height:70vh;
      background:rgba(14,16,20,.92);border-top:1px solid var(--line);
      backdrop-filter:saturate(120%) blur(6px);
      transition:bottom .35s ease;
      display:grid;grid-template-rows:auto 1fr;
      box-shadow:0 -8px 20px rgba(0,0,0,.35);
    }
    .panel.open{bottom:0}
    .panel header{
      display:flex;align-items:center;justify-content:space-between;gap:8px;
      padding:12px 16px;border-bottom:1px solid var(--line)
    }
    .tabs{display:flex;gap:6px;flex-wrap:wrap}
    .tab{
      padding:8px 10px;border:1px solid var(--line);
      color:var(--text);border-radius:10px;font-size:12px;cursor:pointer;background:transparent
    }
    .tab[aria-selected="true"]{background:var(--text);color:#0b0c0f;font-weight:800}
    .panel .body{overflow:auto;padding:14px 16px}
    .section{display:none}
    .section.active{display:block}
    .chips{display:flex;flex-wrap:wrap;gap:6px;margin:6px 0 10px}
    .chip{border:1px solid var(--line);border-radius:999px;padding:6px 10px;font-size:12px;color:var(--muted);cursor:pointer}
    .chip.active{color:#0b0c0f;background:var(--text);font-weight:800}
    .meter{height:8px;border-radius:999px;background:#1b1f27;overflow:hidden;border:1px solid var(--line);margin:10px 0 2px}
    .meter>i{display:block;height:100%;width:0%;background:linear-gradient(90deg,#ff4d6d,#ff0033);transition:width .4s ease}
    .hint{position:fixed;left:16px;bottom:18px;color:var(--muted);font-size:12px}
    .wipe{position:fixed;inset:0;background:#fff;opacity:0;pointer-events:none}

    @keyframes reveal{to{opacity:1;transform:none}}
    @keyframes fadeIn{to{transform:none;opacity:1}}
    @keyframes typing{from{width:0}to{width:var(--type-ch)}}
    @keyframes caret{50%{border-color:transparent}}
    @keyframes out{to{opacity:1}}

    @media(max-width:480px){.panel{height:76vh}.btn{font-size:13px;padding:10px 14px}}
  </style>
</head>
<body>
  <div class="wrap" aria-live="polite">
    <div class="stack" id="stack">
      <div class="line kicker">AUTHOR · DESIGNER · BUILDER</div>
      <h1 class="line" id="titleTop">이요마의 세계로</h1>
      <h1 class="line" id="titleBottom">들어갈 준비가 되었다면</h1>
      <div class="line sub">텍스트만으로 여는 프리-인트로. Enter를 누르면 메인으로 이동합니다.</div>
      <div class="line type" id="typeLine">EYOMA · MYSTERY VLOG</div>
      <div class="line cta" role="group" aria-label="intro actions">
        <button class="btn" id="enterBtn" aria-label="메인으로 이동">Enter →</button>
        <button class="btn ghost" id="infoBtn" aria-controls="panel" aria-expanded="false">Info</button>
      </div>
    </div>
  </div>

  <!-- Info Panel -->
  <aside class="panel" id="panel" aria-hidden="true">
    <header>
      <div class="tabs" role="tablist" aria-label="정보 탭">
        <button class="tab" role="tab" aria-selected="true" data-target="about" id="tab-about">개요</button>
        <button class="tab" role="tab" aria-selected="false" data-target="structure" id="tab-structure">구성</button>
      </div>
      <button class="btn icon" id="closePanel" aria-label="정보 닫기">✕</button>
    </header>
    <div class="body">
      <section class="section active" id="about" role="tabpanel" aria-labelledby="tab-about">
        <p><strong>《미스터리 브이로그》</strong>는 “책에 관한 책에 관한 책”이다.<br>
        실제로 존재하는 이야기, 그 이야기를 만드는 과정, 그리고 그 과정을 읽는 독자의 참여까지 — 세 겹의 프레임을 한 화면에서 겹쳐보는 메타북.</p>
        <div class="chips" id="aboutChips">
          <span class="chip active">메타서사</span>
          <span class="chip">제작일지</span>
          <span class="chip">독자참여</span>
          <span class="chip">수익모델</span>
        </div>
        <div class="meter" aria-hidden="true"><i id="meterBar"></i></div>
        <small id="meterLabel" style="color:var(--muted)">진행률 22%</small>
      </section>
      <section class="section" id="structure" role="tabpanel" aria-labelledby="tab-structure">
        <p>이 사이트는 네 개의 레이어로 엮였다:</p>
        <ul>
          <li><strong>Dashboard</strong> — 전체 맵과 진행 현황의 스냅샷</li>
          <li><strong>Behind</strong> — 제작 노트와 레퍼런스</li>
          <li><strong>Meme</strong> — 장면 카드와 유튜브 클립</li>
          <li><strong>Revenue</strong> — 서점/쿠팡 제휴 실험</li>
        </ul>
      </section>
    </div>
  </aside>

  <div class="wipe" id="wipe" aria-hidden="true"></div>
  <div class="hint">Press Enter · ? = Info</div>

  <script>
    // ===== settings =====
    const NEXT = 'index.html';           // 인트로 다음은 항상 index 하나
    const AUTO_AFTER_MS = 3500;          // 마지막 라인 후 자동 이동 지연

    // ===== staged intro lines =====
    const lines = [...document.querySelectorAll('.line')];
    const delay = [200, 600, 1100, 1500, 1900, 2400];
    lines.forEach((el, i) => setTimeout(() => el.classList.add('show'), delay[i] || 0));

    // ===== navigation with wipe =====
    const wipe = document.getElementById('wipe');
    let autoTimer;
    const goNext = () => {
      wipe.style.animation = 'out .35s ease forwards';
      setTimeout(() => { location.href = NEXT; }, 340);
    };
    const startAuto = () => {
      clearTimeout(autoTimer);
      autoTimer = setTimeout(goNext, (delay.at(-1) || 2000) + AUTO_AFTER_MS);
    };
    const pauseAuto = () => clearTimeout(autoTimer);

    // buttons & keys
    document.getElementById('enterBtn').addEventListener('click', goNext);
    document.addEventListener('keydown', (e) => {
      if (e.key === 'Enter') goNext();
      if (e.key === '?') { togglePanel(true); pauseAuto(); }
    });
    document.addEventListener('pointerdown', pauseAuto);

    // ===== info panel / tabs =====
    const panel = document.getElementById('panel');
    const infoBtn = document.getElementById('infoBtn');
    const closeBtn = document.getElementById('closePanel');
    const setExpanded = (open) => infoBtn.setAttribute('aria-expanded', String(open));

    function togglePanel(forceOpen){
      const willOpen = typeof forceOpen === 'boolean' ? forceOpen : !panel.classList.contains('open');
      panel.classList.toggle('open', willOpen);
      panel.setAttribute('aria-hidden', String(!willOpen));
      setExpanded(willOpen);
      if (willOpen) pauseAuto(); else startAuto();
    }
    infoBtn.addEventListener('click', () => togglePanel());
    closeBtn.addEventListener('click', () => togglePanel(false));

    // tabs
    document.querySelectorAll('.tab').forEach(tab=>{
      tab.addEventListener('click', ()=>{
        document.querySelectorAll('.tab').forEach(t=>t.setAttribute('aria-selected','false'));
        tab.setAttribute('aria-selected','true');
        document.querySelectorAll('.section').forEach(s=>s.classList.remove('active'));
        document.getElementById(tab.dataset.target).classList.add('active');
        pauseAuto();
      });
    });

    // chips meter
    const chipWrap = document.getElementById('aboutChips');
    const bar = document.getElementById('meterBar');
    const meterLabel = document.getElementById('meterLabel');
    // 초기값: 첫 칩 활성(22%)
    bar.style.width = '22%';
    chipWrap.addEventListener('click', (e)=>{
      const c = e.target.closest('.chip'); if (!c) return;
      c.classList.toggle('active');
      const actives = chipWrap.querySelectorAll('.chip.active').length;
      const pct = Math.min( (actives * 22), 100);
      bar.style.width = pct + '%';
      meterLabel.textContent = '진행률 ' + pct + '%';
      pauseAuto();
    });

    // title swap fun
    const t1 = document.getElementById('titleTop'), t2 = document.getElementById('titleBottom');
    function swapTitles(){ const a=t1.textContent; t1.textContent=t2.textContent; t2.textContent=a; }
    t1.addEventListener('click', swapTitles);
    t2.addEventListener('click', swapTitles);

    // kick it
    startAuto();
  </script>
</body>
</html>
