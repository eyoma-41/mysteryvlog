<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>미스터리 브이로그 — 대시보드</title>
  <style>
    :root{
      --bg:#fff;--text:#111318;--muted:#6b7280;--border:#e6e8eb;--brand:#ff0033;
      --card:#f7f7f8;--shadow:0 1px 2px rgba(0,0,0,.06);--r:18px
    }
    *{box-sizing:border-box}
    body{margin:0;font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,Pretendard,system-ui,"Noto Sans KR",sans-serif;color:var(--text);background:var(--bg)}
    .app{max-width:720px;margin:0 auto;padding-bottom:88px}

    /* 헤더 */
    .top{position:sticky;top:0;z-index:10;background:#fff;border-bottom:1px solid var(--border);display:flex;gap:10px;align-items:center;padding:12px 16px}
    .mark{display:flex;align-items:center;gap:10px;font-weight:800;font-size:20px}
    .logo{width:26px;height:18px;border-radius:6px;background:var(--brand);position:relative}
    .logo:after{content:"";position:absolute;left:9px;top:3px;border-left:8px solid #fff;border-top:6px solid transparent;border-bottom:6px solid transparent}

    /* 프로필 */
    .hero{padding:8px 16px 4px}
    .ch{display:flex;gap:14px;align-items:center}
    .avatar{width:80px;height:80px;border-radius:50%;border:3px solid #fff;background:#ddd center/cover no-repeat;box-shadow:var(--shadow)}
    .ch-meta{display:flex;flex-direction:column;gap:4px}
    .title{font-size:22px;font-weight:900}
    .subs{color:var(--muted);font-size:14px}

    /* 섹션 타이틀 */
    .sec-title{font-weight:900;padding:6px 16px 4px;margin:0}

    /* 리플레이 카드 */
    .cards{display:flex;gap:12px;overflow-x:auto;padding:0 16px 6px;scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch}
    .card{
      flex:0 0 auto;scroll-snap-align:start;width:160px;height:110px;border:1px solid var(--border);
      border-radius:16px;background:#fff;box-shadow:var(--shadow);display:flex;align-items:flex-start;justify-content:flex-start;
      text-align:left;padding:10px 12px;font-weight:300;font-size:12px;line-height:1.28;cursor:pointer;user-select:none
    }
    .card:active{transform:scale(.98)}
    .card.is-selected{outline:2px solid var(--brand);outline-offset:0}

    /* 본문 패널 (스크롤 가능) */
    .panel{margin:8px 16px 14px;background:var(--card);border:1px solid var(--border);border-radius:var(--r);padding:16px;min-height:120px;max-height:55vh;overflow:auto;-webkit-overflow-scrolling:touch}
    .panel h3{margin:0 0 10px}
    .panel p{margin:0 0 12px}

    /* 하단 탭바 */
    .tabs{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid var(--border);display:grid;grid-template-columns:repeat(5,1fr);height:72px}
    .tab{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;font-size:12px;color:#333;text-decoration:none}
    .tab svg{width:22px;height:22px}
    .tab.active{color:var(--brand);font-weight:800}
  </style>
</head>
<body>
  <div class="app">
    <header class="top" role="banner">
      <div class="mark"><span class="logo"></span><span>Studio</span></div>
      <div style="margin-left:auto;display:flex;gap:8px">
        <button title="새로 만들기" aria-label="새로 만들기" style="padding:6px 10px;border:1px solid var(--border);background:#fff;border-radius:999px;cursor:pointer">+</button>
      </div>
    </header>

    <!-- 프로필 -->
    <section class="hero" aria-label="채널 헤더">
      <div class="ch">
        <div id="avatar" class="avatar" style="background-image:url('/hero-book.jpg')"></div>
        <div class="ch-meta">
          <div class="title" id="title">미스터리 브이로그</div>
          <div class="subs">구독자 <strong id="subs">320,158</strong></div>
        </div>
      </div>
    </section>

    <!-- 리플레이 -->
    <h2 class="sec-title">미스터리 브이로그: 리플레이</h2>
    <div class="cards" id="replay-cards" aria-label="리플레이 목록"></div>
    <div id="panel" class="panel" role="region" aria-live="polite">
      <div class="hint">네모 박스를 눌러 내용을 표시합니다.</div>
    </div>
  </div>

  <!-- 하단 탭: 각기 다른 페이지로 이동 -->
  <nav class="tabs" aria-label="하단 메뉴">
    <a class="tab active" href="index.html" data-page="dashboard" aria-current="page">
      <svg viewBox="0 0 24 24"><path d="M4 12.5a1 1 0 0 1 .4-.8l7-5a1 1 0 0 1 1.2 0l7 5a1 1 0 0 1 .4.8V19a1 1 0 0 1-1 1h-4v-6H9v6H5a1 1 0 0 1-1-1v-6.5Z" fill="currentColor"/></svg>
      대시보드
    </a>
    <a class="tab" href="meme.html" data-page="meme">
      <svg viewBox="0 0 24 24"><path d="M3 7h18M7 3v18M3 12h18M3 17h12" stroke="currentColor" stroke-width="2" fill="none"/></svg>
      밈
    </a>
    <a class="tab" href="reference.html" data-page="ref">
      <svg viewBox="0 0 24 24"><path d="M5 4h14v16H5zM8 8h8M8 12h8M8 16h8" stroke="currentColor" stroke-width="2" fill="none"/></svg>
      레퍼런스
    </a>
    <a class="tab" href="behind.html" data-page="behind">
      <svg viewBox="0 0 24 24"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" fill="none"/></svg>
      비하인드
    </a>
    <a class="tab" href="revenue.html" data-page="revenue">
      <svg viewBox="0 0 24 24"><path d="M4 18s3-6 8-6 8 6 8 6M10 9a2 2 0 1 0 4 0 2 2 0 0 0-4 0Z" stroke="currentColor" stroke-width="2" fill="none"/></svg>
      수익창출
    </a>
  </nav>

  <script>
    // ---------- 리플레이 데이터 ----------
    const replayData = [
      { title:"타임라인", body:`여기에 긴 텍스트…(이미 넣은 타임라인 텍스트)` },
      { title:"왜 쓰는가?", body:`여기에 '왜 쓰는가?' 내용` },
      { title:"무엇을 쓰지", body:`여기에 '무엇을 쓰지' 내용` },
      { title:"어떻게 바꾸지", body:`여기에 '어떻게 바꾸지' 내용` },
      { title:"계약을 하려고", body:`여기에 '계약을 하려고' 내용` },
      { title:"작업하는 마음", body:`여기에 '작업하는 마음' 내용` },
      { title:"책이 나오고", body:`여기에 '책이 나오고' 내용` }
    ];

    const listEl  = document.getElementById('replay-cards');
    const panelEl = document.getElementById('panel');

    const slug = s => s.replace(/\s+/g,'-').replace(/[^\w\u3131-\uD79D-]/g,'').toLowerCase();

    // 카드 렌더 + 개별 클릭
    const buttons = new Map();
    replayData.forEach((item) => {
      const key = slug(item.title);
      const b = document.createElement('button');
      b.type = 'button';
      b.className = 'card';
      b.textContent = item.title;
      b.dataset.key = key;
      b.setAttribute('aria-label', `${item.title} 보기`);
      b.addEventListener('click', ()=>openKey(key));
      b.addEventListener('keydown', (e)=>{ if (e.key==='Enter'||e.key===' ') { e.preventDefault(); openKey(key);} });
      listEl.appendChild(b);
      buttons.set(key, { btn:b, data:item });
    });

    function openKey(key, scrollCard=true){
      const entry = buttons.get(key); if(!entry) return;
      document.querySelectorAll('.card').forEach(c=>c.classList.remove('is-selected'));
      entry.btn.classList.add('is-selected');
      panelEl.innerHTML = `<h3>${entry.data.title}</h3>` + entry.data.body.split('\n').map(t=>`<p>${t.trim()}</p>`).join('');
      panelEl.scrollTo({top:0,behavior:'auto'});
      if (scrollCard) entry.btn.scrollIntoView({inline:'center',block:'nearest',behavior:'smooth'});
      history.replaceState(null,"",`#${key}`);
    }

    // 드래그 스크롤(클릭 간섭 없음)
    (function dragScroll(c){
      let down=false, sx=0, ss=0, pid=null;
      c.addEventListener('pointerdown',e=>{down=true;sx=e.clientX;ss=c.scrollLeft;pid=e.pointerId;c.setPointerCapture(pid);});
      c.addEventListener('pointermove',e=>{if(!down)return;c.scrollLeft=ss-(e.clientX-sx);});
      const end=()=>{down=false;if(pid)c.releasePointerCapture(pid);};
      c.addEventListener('pointerup',end);c.addEventListener('pointercancel',end);c.addEventListener('pointerleave',end);
    })(listEl);

    // 해시 진입/변경
    function initialOpen(){
      const key=(location.hash||'').replace(/^#/,'');
      if (key && buttons.has(key)) openKey(key,false);
      else { const firstKey=buttons.keys().next().value; if(firstKey) openKey(firstKey,false); }
    }
    window.addEventListener('hashchange',initialOpen);
    initialOpen();
  </script>
</body>
</html>
