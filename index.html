<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>미스터리 브이로그 — 대시보드</title>

  <!-- Google Fonts: Noto Sans KR -->
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;700;900&display=swap" rel="stylesheet">

  <style>
    :root{
      --bg:#fff;--text:#111318;--muted:#6b7280;--border:#e6e8eb;--brand:#ff0033;
      --card:#f7f7f8;--shadow:0 1px 2px rgba(0,0,0,.06);--r:18px;

      --font-size-base: 14px;
      --font-size-sm: 12px;
      --font-size-md: 16px;
      --font-size-lg: 20px;
      --font-size-xl: 28px;

      --font-weight-light: 300;
      --font-weight-regular: 400;
      --font-weight-bold: 700;
      --font-weight-black: 900;

      --line-height-tight: 1.2;
      --line-height-normal: 1.5;
      --line-height-loose: 1.8;
    }

    *{box-sizing:border-box}

    body{
      margin:0;
      font-family:"Noto Sans KR",-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,system-ui,"Noto Sans KR",sans-serif;
      color:var(--text);background:var(--bg);
      font-size: var(--font-size-base);
      font-weight: var(--font-weight-regular);
      line-height: var(--line-height-normal);
    }

    .app{max-width:720px;margin:0 auto;padding-bottom:88px}

    /* 헤더 */
    .top{position:sticky;top:0;z-index:10;background:#fff;border-bottom:1px solid var(--border);display:flex;gap:10px;align-items:center;padding:12px 16px}
    .mark{display:flex;align-items:center;gap:10px;font-weight:800;font-size:20px}
    .logo{width:26px;height:18px;border-radius:6px;background:var(--brand);position:relative}
    .logo:after{content:"";position:absolute;left:9px;top:3px;border-left:8px solid #fff;border-top:6px solid transparent;border-bottom:6px solid transparent}

    /* 프로필 */
    .hero{padding:8px 16px 4px}
    .ch{display:flex;gap:14px;align-items:center}
    .avatar{width:80px;height:80px;border-radius:50%;border:3px solid #fff;background:#ddd center/cover no-repeat;box-shadow:var(--shadow)}
    .ch-meta{display:flex;flex-direction:column;gap:4px}
    .title{font-size:22px;font-weight:900}
    .subs{color:var(--muted);font-size:14px}

    .sec-title{font-weight:900;padding:0 16px;margin:24px 0 6px}

    /* 폰트 유틸 */
    .text-sm  { font-size: var(--font-size-sm); }
    .text-md  { font-size: var(--font-size-md); }
    .text-lg  { font-size: var(--font-size-lg); }
    .text-xl  { font-size: var(--font-size-xl); }

    .font-light   { font-weight: var(--font-weight-light); }
    .font-regular { font-weight: var(--font-weight-regular); }
    .font-bold    { font-weight: var(--font-weight-bold); }
    .font-black   { font-weight: var(--font-weight-black); }

    .leading-tight  { line-height: var(--line-height-tight); }
    .leading-normal { line-height: var(--line-height-normal); }
    .leading-loose  { line-height: var(--line-height-loose); }

    /* 글상자 유틸 */
    .box{
      padding:12px;
      border:1px solid var(--border);
      border-radius:10px;
      background:#fff;
      line-height:1.6;
      box-shadow: var(--shadow);
      margin:10px 0;
    }
    .box--dashed{border-style:dashed;border-color:#bfc5cc;box-shadow:none;}
    .box--stripe{border-left:4px solid var(--brand);padding-left:12px;}
    .box--note{background:var(--card);}
    .box--info   { border-color:#4da3ff; background:#f3f8ff; }
    .box--warn   { border-color:#ffb020; background:#fff8ea; }
    .box--success{ border-color:#3cc47a; background:#f2fbf6; }
    .box .label{display:inline-block;font-weight:900;margin-bottom:6px;color:#111;}
    .box--quote{position:relative;background:#fff;}
    .box--quote::before{content:"“";position:absolute;left:10px;top:-6px;font-size:32px;line-height:1;color:#ccd2d9;}
    .box--quote p{margin:0;}

    /* 카드 영역 */
    .cards{
      display:flex;gap:12px;overflow-x:auto;
      padding:8px 16px 10px;
      scroll-snap-type:x mandatory;-webkit-overflow-scrolling:touch;
      position:relative;z-index:1;user-select:none;-webkit-user-select:none;
      touch-action: pan-x;
    }
    .card{
      flex:0 0 auto;scroll-snap-align:start;width:160px;height:110px;
      border:1px solid var(--border);border-radius:16px;
      background:#fff;box-shadow:var(--shadow);
      display:flex;align-items:flex-start;justify-content:flex-start;
      text-align:left;padding:10px 12px;
      font-weight:300;font-size:12px;line-height:1.28;
      cursor:pointer;user-select:none;position:relative
    }
    .card:active{transform:scale(.985)}
    .card.is-selected{
      border-color: var(--brand);
      outline: none;
      box-shadow: 0 0 0 2px rgba(255,0,51,.25);
    }

    /* 패널 (초기 닫힘 상태) */
    .panel {
      margin: 8px 16px 14px;
      background: var(--card);
      border: 1px solid var(--border);
      border-radius: var(--r);
      padding: 0 16px;
      min-height: 0;
      max-height: 0;
      overflow: hidden;
      transition: max-height 0.35s ease, padding 0.35s ease;
    }
    .panel.open {
      padding: 16px;
      max-height: 55vh;
      min-height: 120px;
      overflow: auto;
      -webkit-overflow-scrolling: touch;
    }
    .panel h3{margin:0 0 10px}
    .panel p{margin:0 0 12px}

    /* 하단 탭바 */
    .tabs{position:fixed;left:0;right:0;bottom:0;background:#fff;border-top:1px solid var(--border);display:grid;grid-template-columns:repeat(5,1fr);height:72px}
    .tab{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:6px;font-size:12px;color:#333;text-decoration:none}
    .tab svg{width:22px;height:22px}
    .tab.active{color:var(--brand);font-weight:800}
  </style>
</head>
<body>
  <div class="app">
    <header class="top" role="banner">
      <div class="mark"><span class="logo"></span><span>Studio</span></div>
      <div style="margin-left:auto;display:flex;gap:8px">
        <button title="새로 만들기" aria-label="새로 만들기" style="padding:6px 10px;border:1px solid var(--border);background:#fff;border-radius:999px;cursor:pointer">+</button>
      </div>
    </header>

    <!-- 프로필 -->
    <section class="hero" aria-label="채널 헤더">
      <div class="ch">
        <div id="avatar" class="avatar" style="background-image:url('/hero-book.jpg')"></div>
        <div class="ch-meta">
          <div class="title" id="title">미스터리 브이로그</div>
          <div class="subs">구독자 <strong id="subs">320,158</strong></div>
        </div>
      </div>
    </section>

    <!-- 리플레이 -->
    <h2 class="sec-title" id="replay-title">미스터리 브이로그: 리플레이</h2>
    <div class="cards" id="replay-cards" aria-label="리플레이 목록"></div>
    <div id="panel" class="panel" role="region" aria-live="polite">
      <div class="hint">네모 박스를 눌러 내용을 표시합니다.</div>
    </div>
  </div>

  <!-- 하단 탭 -->
  <nav class="tabs" aria-label="하단 메뉴">
    <a class="tab active" href="index.html"><svg viewBox="0 0 24 24"><path d="M4 12.5a1 1 0 0 1 .4-.8l7-5a1 1 0 0 1 1.2 0l7 5a1 1 0 0 1 .4.8V19a1 1 0 0 1-1 1h-4v-6H9v6H5a1 1 0 0 1-1-1v-6.5Z" fill="currentColor"/></svg>대시보드</a>
    <a class="tab" href="meme.html"><svg viewBox="0 0 24 24"><path d="M3 7h18M7 3v18M3 12h18M3 17h12" stroke="currentColor" stroke-width="2" fill="none"/></svg>밈</a>
    <a class="tab" href="reference.html"><svg viewBox="0 0 24 24"><path d="M5 4h14v16H5zM8 8h8M8 12h8M8 16h8" stroke="currentColor" stroke-width="2" fill="none"/></svg>레퍼런스</a>
    <a class="tab" href="behind.html"><svg viewBox="0 0 24 24"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" fill="none"/></svg>비하인드</a>
    <a class="tab" href="revenue.html"><svg viewBox="0 0 24 24"><path d="M4 18s3-6 8-6 8 6 8 6M10 9a2 2 0 1 0 4 0 2 2 0 0 0-4 0Z" stroke="currentColor" stroke-width="2" fill="none"/></svg>수익창출</a>
  </nav>

<script>
  // ---------- 리플레이 데이터 ----------
  const replayData = [
    { title: "타임라인", body: `<p class="text-md font-black leading-tight">2021. 03. | <span class="text-md font-light leading-normal">스쿠버다이빙 중에 수면에서 냉동 인간들이 내려오는 악몽을 꿈.</span></p>` },
    { title: "왜 쓰는가?", body: `<p class="text-md font-light leading-normal">문학에 뜻을 품어본 사람이라면...</p>` },
    { title: "무엇을 쓰지", body: `<p class="text-md font-light leading-normal">이야기를 쓰는 방법은...</p>` },
    { title: "어떻게 바꾸지", body: `<p>여기에 '어떻게 바꾸지' 내용</p>` },
    { title: "계약을 하려고", body: `<p>여기에 '계약을 하려고' 내용</p>` },
    { title: "작업하는 마음", body: `<p>여기에 '작업하는 마음' 내용</p>` },
    { title: "책이 나오고", body: `<p>여기에 '책이 나오고' 내용</p>` },
  ];

  const listEl  = document.getElementById('replay-cards');
  const panelEl = document.getElementById('panel');

  const slug = s => String(s).replace(/\s+/g,'-').replace(/[^\w\u3131-\uD79D-]/g,'').toLowerCase();
  const toPlain = (html) => { const d=document.createElement('div'); d.innerHTML=String(html??''); return (d.textContent||d.innerText||'').trim(); };

  const buttons = new Map();
  replayData.forEach((item) => {
    const label = toPlain(item.title);
    const key   = slug(label);

    const b = document.createElement('button');
    b.type = 'button';
    b.className = 'card';
    b.textContent = label;
    b.dataset.key = key;
    b.setAttribute('aria-label', `${label} 보기`);

    b.addEventListener('click', (e)=>{
      if (drag.moved) return;
      openKey(key);
    });

    listEl.appendChild(b);
    buttons.set(key, { btn: b, data: { ...item, title: label } });
  });

  // ---- 드래그 스크롤 ----
  const drag = { down:false, startX:0, startLeft:0, moved:false };
  const TH = 6;

  listEl.addEventListener('mousedown', (e)=>{
    if (e.button !== 0) return;
    drag.down = true; drag.moved = false;
    drag.startX = e.pageX; drag.startLeft = listEl.scrollLeft;
  });
  window.addEventListener('mousemove', (e)=>{
    if (!drag.down) return;
    const dx = e.pageX - drag.startX;
    if (Math.abs(dx) > TH) drag.moved = true;
    listEl.scrollLeft = drag.startLeft - dx;
  });
  window.addEventListener('mouseup', ()=>{
    drag.down = false;
    setTimeout(()=> drag.moved = false, 40);
  });

  listEl.addEventListener('touchstart', (e)=>{
    const t = e.touches[0];
    drag.down = true; drag.moved = false;
    drag.startX = t.clientX; drag.startLeft = listEl.scrollLeft;
  }, {passive:true});
  listEl.addEventListener('touchmove', (e)=>{
    if (!drag.down) return;
    const t = e.touches[0];
    const dx = t.clientX - drag.startX;
    if (Math.abs(dx) > TH) drag.moved = true;
    listEl.scrollLeft = drag.startLeft - dx;
  }, {passive:true});
  listEl.addEventListener('touchend', ()=>{
    drag.down = false;
    setTimeout(()=> drag.moved = false, 40);
  });

  // 카드 열기
  function openKey(key, scrollCard = true) {
    const entry = buttons.get(key); if (!entry) return;

    document.querySelectorAll('.card').forEach(c => c.classList.remove('is-selected'));
    entry.btn.classList.add('is-selected');

    panelEl.innerHTML = entry.data.body;
    panelEl.classList.add('open');
    panelEl.scrollTo({ top: 0, behavior: 'auto' });

    if (scrollCard) entry.btn.scrollIntoView({ inline:'center', block:'nearest', behavior:'smooth' });

    const titleEl = document.getElementById('replay-title');
    if (titleEl) {
      const top = titleEl.getBoundingClientRect().top;
      if (top < 84) window.scrollBy({ top: top - 96, behavior: 'smooth' });
    }

    history.replaceState(null, "", `#${key}`);
  }

  function initialOpen() {
    const key = (location.hash || '').replace(/^#/, '');
    if (key && buttons.has(key)) openKey(key, false);
  }

  window.addEventListener('hashchange', initialOpen);
  initialOpen();
</script>
</body>
</html>
